
<!DOCTYPE html>
<html lang="en">
        <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>

        <title>Patrik Svensson - It&#x27;s not a party without Cake</title>
        <meta name="description" content="Patrik Svensson" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">        

        <link type="application/rss+xml" rel="alternate" title="Patrik Svensson" href="/feed.rss" />
                <link type="application/atom+xml" rel="alternate" title="Patrik Svensson" href="/feed.atom" />
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">

        <link href="/assets/css/bootstrap.min.css" rel="stylesheet" />
        <link href="/assets/css/highlight.css" rel="stylesheet">
        <link href="/assets/css/clean-blog.css" rel="stylesheet" />
        <link href="/assets/css/master.css" rel="stylesheet" />
        <link href="/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
        <link href="/assets/css/override.css" rel="stylesheet" />


        <meta name="application-name" content="Patrik Svensson" />
        <meta name="msapplication-tooltip" content="Patrik Svensson" />
        <meta name="msapplication-starturl" content="/" />

        <meta property="og:title" content="Patrik Svensson - It&#x27;s not a party without Cake" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="http://patriksvensson.se/2014/07/its-not-a-party-without-cake" />
        <!-- TODO: More social graph meta tags -->

        <script src="/assets/js/jquery.min.js"></script>
        <script src="/assets/js/bootstrap.min.js"></script>     
        <script src="/assets/js/highlight.pack.js"></script>   
        <script src="/assets/js/clean-blog.js"></script>
        <script src="/assets/js/d3.v3.min.js"></script>
        <script src="/assets/js/trianglify.min.js"></script>
        <script src="/assets/js/please-compressed.js"></script>
        <script src="/assets/js/background-check.min.js"></script>
                
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
                <script src="/assets/js/html5shiv.js"></script>
                <script src="/assets/js/respond.min.js"></script>
        <![endif]-->
        
        


        </head>
        <body>
                
                <!-- Navigation -->
                <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
                        <div class="container-fluid">
                                <!-- Brand and toggle get grouped for better mobile display -->
                                <div class="navbar-header page-scroll">
                                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                                        <span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        </button>
                                        <a class="navbar-brand" href="/">Patrik Svensson</a>
                                </div>
                        
                                <!-- Collect the nav links, forms, and other content for toggling -->
                                <div class="collapse navbar-collapse" id="navbar-collapse">
                                        <ul class="nav navbar-nav navbar-right">
                                                <li><a href="/blog">Archive</a></li>
<li><a href="/tags">Tags</a></li> 
                                        </ul>
                                </div>
                                <!-- /.navbar-collapse -->
                        </div>
                        <!-- /.container -->
                </nav>
                
                <!-- Page Header -->
                <header class="intro-header" id="intro-header">
                        <div class="container">
                                <div class="row">
                                        <div class="col-md-12">

    
<div class="post-heading">
    <h1>It&#x27;s not a party without Cake</h1>
    <div class="meta">        
Published on 18 juli 2014<br>    </div>
        <div class="tags">
                    <a role="button" href="/tags/net" class="btn btn-default btn-xs">.NET</a>
                    <a role="button" href="/tags/c%23" class="btn btn-default btn-xs">C#</a>
                    <a role="button" href="/tags/cake" class="btn btn-default btn-xs">Cake</a>
        </div>     
</div>
                                        </div>
                                </div>
                        </div>
                </header>
                
                <!-- Main Content -->
                <div class="container">
                        <div class="row">
                                <div id="content" class="col-md-12">
                                        

<p>I have during my nine years as a (professional) programmer used several different build automation systems such as <a href="https://github.com/ruby/rake">Rake</a>, <a href="https://github.com/psake/psake">psake</a>, <a href="http://www.cmake.org/">CMake</a>, <a href="http://msdn.microsoft.com/en-us/library/ms181709.aspx">TFS Build</a> and <a href="http://fsharp.github.io/FAKE/">FAKE</a>, but none of these have allowed me to write my build scripts using C# - the language I use the most.</p>
<p>About two months ago I decided to change that and now it's time to formally introduce Cake, which is short for C# Make.</p>
<!--excerpt-->
<p><img src="/images/cake-medium.png" class="img-fluid" alt="Build Status" /></p>
<h2 id="what-is-cake">What is Cake?</h2>
<p>Cake is (like you probably already figured out) a build automation system with a C# DSL to do things like compiling code, copy files/folders, running unit tests, compress files and build NuGet packages.</p>
<p>Cake uses a <a href="http://martinfowler.com/articles/rake.html#DependencyBasedProgramming">dependency based programming model</a> just like Rake, FAKE and similar build automation systems where you declare <em>tasks</em> and the dependencies between those. When you execute a task, Cake will construct a directed acyclic graph containing all tasks and execute these in the correct order.</p>
<pre><code>Task(&quot;A&quot;)
    .Does(() =&gt;
{
});

Task(&quot;B&quot;)
    .IsDependentOn(&quot;A&quot;);
    .Does(() =&gt;
{
});

RunTarget(&quot;B&quot;);
</code></pre>
<p>The goal of Cake is to be a first class alternative to those who - like me - want to write their build scripts in C# instead of Ruby, F# or Powershell.</p>
<h2 id="what-does-a-cake-script-look-like">What does a Cake script look like?</h2>
<p>Assume our build script have four steps where we want to:</p>
<ol>
<li>Clean up old artifacts.</li>
<li>Build the code.</li>
<li>Run unit tests.</li>
<li>Package generated artifacts.</li>
</ol>
<p>A build script like that could look something like this.</p>
<pre><code>var target = Argument&lt;string&gt;(&quot;target&quot;, &quot;Package&quot;);
var config = Argument&lt;string&gt;(&quot;config&quot;, &quot;Release&quot;);

Task(&quot;Clean&quot;)
    .Does(() =&gt;
{
    // Clean directories.
    CleanDirectory(&quot;./output&quot;);
    CleanDirectory(&quot;./output/bin&quot;);
    CleanDirectories(&quot;./src/**/bin/&quot; + config);
});

Task(&quot;Build&quot;)
    .IsDependentOn(&quot;Clean&quot;)
    .Does(() =&gt;
{
    // Build the solution using MSBuild.
    MSBuild(&quot;./src/Project.sln&quot;, settings =&gt; 
        settings.SetConfiguration(config));     
});

Task(&quot;RunUnitTests&quot;)
    .IsDependentOn(&quot;Build&quot;)
    .Does(() =&gt;
{
    // Run xUnit tests.
    XUnit(&quot;./src/**/bin/&quot; + config + &quot;/*.Tests.dll&quot;);
});

Task(&quot;CopyFiles&quot;)
    .IsDependentOn(&quot;RunUnitTests&quot;)
    .Does(() =&gt;
{
    var path = &quot;./src/Project/bin/&quot; + configuration;    
    var files = GetFiles(path + &quot;/**/*.dll&quot;) 
        + GetFiles(path + &quot;/**/*.exe&quot;);

    // Copy all exe and dll files to the output directory.
    CopyFiles(files, &quot;./output/bin&quot;);
});    

Task(&quot;Package&quot;)
    .IsDependentOn(&quot;RunUnitTests&quot;)
    .Does(() =&gt;
{
    // Zip all files in the bin directory.
    Zip(&quot;./output/bin&quot;, &quot;./output/build.zip&quot;);
});

RunTarget(target);
</code></pre>
<p>To run our build script we invoke <code>Cake.exe</code> with the script file as the first argument, and (optionally) the name of our target task as the second argument. We can also tell Cake how much information we're interested in with the built in <code>verbosity</code> parameter, which is very useful when debugging a script.</p>
<pre><code>C:&gt; Cake.exe build.cake -target=Package -verbosity=diagnostic
</code></pre>
<p>This is just an example. Much more functionality is already implemented such as support for <code>MSBuild</code>, <code>MSTest</code>, <code>xUnit</code>, <code>NUnit</code>, <code>ILMerge</code>, <code>NuGet pack/restore</code> and the most common file system operations such as <code>file/folder manipulation</code> and <code>globbing</code>.</p>
<p>To see an actual build script in action, fork or clone the <a href="https://github.com/cake-build/cake">GitHub repository</a> and run <code>build.cmd</code> which will download Cake from NuGet and run the <code>build.cake</code> script.</p>
<h2 id="what-now">What now?</h2>
<p>This was only supposed to be an introduction to Cake but I will blog more about this in the near future.</p>
<p>If you find this project interesting and want to help or you just have opinions about stuff, you can check out the full repository at <a href="https://github.com/cake-build/cake">https://github.com/cake-build/cake</a>.</p>



                                </div>
                        </div>
                </div>
                
                <hr>
                
                <!-- Footer -->
                <footer>
                        <div class="container">
        <div class="row">
                <div class="col-md-12">
                <ul class="list-inline text-center">
                        <li>
                        <a href="https://twitter.com/firstdrafthell">
                                <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                        </a>
                        </li>
                        <li>
                        <a href="https://github.com/patriksvensson">
                                <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                        </a>
                        </li>
                </ul>
                <p class="copyright text-muted">
                        Blog originally forked from <a href="https://github.com/gep13/gep13">https://github.com/gep13/gep13</a><br />
                        This work is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/" rel="license">Creative Commons Attribution 4.0 International License</a>.
                        <br />
                        <a href="/feed.rss"><i class="fa fa-rss"></i> RSS Feed</a> | <a href="/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
                        <br />
                        <a href="https://github.com/patriksvensson/blog"><i class="fa fa-github"></i> This Site on GitHub</a> | <strong><a href="https://wyam.io">Generated by Wyam</a></strong>
                </p>
                </div>
        </div>
</div>
                </footer> 

                <script type="text/javascript" src="/assets/js/anchor.min.js"></script>
<script type="text/javascript" src="/assets/js/clipboard.min.js"></script>
<script type="text/javascript">
    anchors.options.placement = 'left';
    anchors.add();

    var snippets = document.querySelectorAll("pre > code");
    [].forEach.call(snippets, function(snippet) {
        snippet.insertAdjacentHTML("beforebegin", "<button class='btn-copy' data-clipboard-snippet><img class='clippy' width=13 src='/assets/images/clippy.svg' alt='Copy to clipboard'></button>");
    });
    var clipboardSnippets = new Clipboard('[data-clipboard-snippet]', {
        target: function(trigger) {
            return trigger.nextElementSibling;
        }
    });
    clipboardSnippets.on('success', function(e) {
        e.clearSelection();
        showTooltip(e.trigger, "Copied!");
    });
    clipboardSnippets.on('error', function(e) {
        showTooltip(e.trigger, fallbackMessage(e.action));
    });
</script>
                <script>hljs.initHighlightingOnLoad();</script>

                        <script type="text/javascript">                
                                // Header background                        
                                var colors = Please.make_color({
                                        colors_returned: 3,
                                        saturation: .6
                                });
                                var t = new Trianglify({
                                        x_gradient: colors,
                                        y_gradient: ["#FFFFFF"]
                                });
                                var header = document.getElementById("intro-header");
                                var pattern = t.generate(header.clientWidth, header.clientHeight);
                                header.setAttribute('style', 'background-image: ' + pattern.dataUrl);                        
                        </script>

                <script>
                        BackgroundCheck.init({
                                targets: '.intro-header,.navbar',
                                images: '.intro-header'
                        });
                </script>
        </body>
</html>

